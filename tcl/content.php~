         $total_cost = 0;
         $total_traffic = 0;
         $total_traffic_est = 0;
         $total_base_traffic = 0;
         $total_bandwidth_cost = 0;
         $total_storage_cost = 0;
         $total_storage = 0;
         $total_database = 0;


          $est_traffic = ($stats->total_traffic / $days) * $days_in_month;

          $over_traffic = 0;

          $total_base_traffic += $stats->base_traffic;
          if($stats->base_traffic > 0) {
           if(($stats->base_traffic * 1024 * 1024 ) - $est_traffic < 0) {
            $over_traffic = $est_traffic - ( $stats->base_traffic * 1024 * 1024 );

            if(fmod($over_traffic, 1024 * 1024 * $stats->x_traffic) == 0)  {
             $over_cnt = $over_traffic / (1024 * 1024 * $stats->x_traffic );
            } else {
             $over_cnt = floor($over_traffic / (1024 * 1024 * $stats->x_traffic )) + 1;
            }

            $bandwidth_cost = $over_cnt * $stats->over_traffic;
            $total_bandwidth_cost += $bandwidth_cost;
           }
          }

          $total_traffic += $stats->total_traffic;
          $total_traffic_est += $est_traffic;

          $over_storage = 0;

          if($stats->base_storage > 0) {
           if(($stats->base_storage * 1024 * 1024 ) - $stats->total_storage < 0) {
            $over_storage = $stats->total_storage - ( $stats->base_storage * 1024 * 1024 );

            if(fmod($over_storage, 1024 * 1024 * $stats->x_storage) == 0)  {
             $over_cnt = $over_storage / (1024 * 1024 * $stats->x_storage);
            } else {
             if($stats->x_storage == 0) {
              $over_cnt = -1;
             } else {
              $over_cnt = floor($over_storage / (1024 * 1024 * $stats->x_storage)) + 1;
             }
            }

            $storage_cost = $over_cnt * $stats->over_storage;
            $total_storage_cost += $storage_cost;
           }
          }

          $total_storage += $stats->total_storage;
            
            <TH ALIGN="center" BGCOLOR="#FFFFFF">Current</TH>
            <TH ALIGN="center" BGCOLOR="#FFFFFF">Estimated</TH>
            <TH ALIGN="center" BGCOLOR="#FFFFFF">Quota</TH>
            <TH ALIGN="center" BGCOLOR="#FFFFFF">Overusage</TH>
            <TH ALIGN="center" BGCOLOR="#FFFFFF">Extra Cost</TH>
           </TR>
           <TR>
            <TD ALIGN="center" BGCOLOR="#AAAAAA"><?= convert_units($stats->total_traffic) ?></TD>
            <TD ALIGN="center" BGCOLOR="#AAAAAA"><?= convert_units($est_traffic) ?></TD>
            <TD ALIGN="center" BGCOLOR="#AAAAAA"><?= convert_units($stats->base_traffic * 1024 * 1024) ?></TD>
            <TD ALIGN="center" BGCOLOR="<? if (($stats->base_traffic * 1024 * 1024 ) - $est_traffic < 0) { ?>YELLOW<? } else { ?>#AAAAAA<? } ?>">
             <?= convert_units($over_traffic) ?>
            </TD>
            <TD ALIGN="center" BGCOLOR="<? if (($stats->base_traffic * 1024 * 1024 ) - $est_traffic < 0) { ?>YELLOW<? } else { ?>#AAAAAA<? } ?>">
             <?= sprintf("%.2f", $bandwidth_cost) ?>
            </TD>
           </TR>
           <TR>
            <TH ALIGN="center" BGCOLOR="#FFFFFF" COLSPAN="2">Current</TH>
            <TH ALIGN="center" BGCOLOR="#FFFFFF">Quota</TH>
            <TH ALIGN="center" BGCOLOR="#FFFFFF">Overusage</TH>
            <TH ALIGN="center" BGCOLOR="#FFFFFF">Extra Cost</TH>
           </TR>
           <TR>
            <TD ALIGN="center" BGCOLOR="#AAAAAA" COLSPAN="2"><?= convert_units($stats->total_storage) ?></TD>
            <TD ALIGN="center" BGCOLOR="#AAAAAA"><?= convert_units($stats->base_storage * 1024 * 1024) ?></TD>
            <TD ALIGN="center" BGCOLOR="<? if (($stats->base_storage * 1024 * 1024 ) - $stats->total_storage < 0) { ?>YELLOW<? } else { ?>#AAAAAA<? } ?>">
             <?= convert_units($over_storage) ?>
            </TD>
            <TD ALIGN="center" BGCOLOR="<? if (($stats->base_storage * 1024 * 1024 ) - $stats->total_storage < 0) { ?>YELLOW<? } else { ?>#AAAAAA<? } ?>">
             <?= printf("%.2f", $storage_cost) ?>
            </TD>
           </TR>
        <TR>
         <TH ALIGN="right" BGCOLOR="#FFFFFF" COLSPAN="3"><FONT SIZE="1">Totals</TH>
         <TH ALIGN="center" BGCOLOR="#FFFFFF">Traffic</TH>
         <TH ALIGN="center" BGCOLOR="#FFFFFF">Estimate</TH>
         <TH ALIGN="center" BGCOLOR="#FFFFFF">Total Quota</TH>
         <TH ALIGN="center" BGCOLOR="#FFFFFF">Storage</TH>
         <TH ALIGN="center" BGCOLOR="#FFFFFF">Total Cost</TH>
        </TR>
        <TR>
         <TH ALIGN="right" BGCOLOR="#FFFFFF" COLSPAN="3"><FONT SIZE="1">&nbsp;</TH>
         <TD ALIGN="center" BGCOLOR="#AAAAAA"><?= convert_units($total_traffic) ?></TD>
         <TD ALIGN="center" BGCOLOR="#AAAAAA"><?= convert_units($total_traffic_est) ?></TD>
         <TD ALIGN="center" BGCOLOR="#AAAAAA"><?= convert_units($total_base_traffic * 1024 * 1024) ?></TD>
         <TD ALIGN="center" BGCOLOR="#AAAAAA"><?= convert_units($total_storage) ?></TD>
         <TD ALIGN="center" BGCOLOR="#AAAAAA"><?= printf("%.2f", $total_traffic_cost + $total_storage_cost) ?></TD>
        </TR>
       <? } else { ?>
        <TR><TD ALIGN="left" BGCOLOR="#FFFFFF"><FONT SIZE="1">Sorry, there currently are no statistics for your VM(s).</TR>
       <? } ?>
      </TABLE>
